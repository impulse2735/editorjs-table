{"version":3,"sources":["webpack://Table/webpack/universalModuleDefinition","webpack://Table/webpack/bootstrap","webpack://Table/./src/documentUtils.js","webpack://Table/./src/resize.js","webpack://Table/./src/selectLine.js","webpack://Table/./src/createLine.js","webpack://Table/./src/cellMenu.js","webpack://Table/./src/shortcuts.js","webpack://Table/./src/table.js","webpack://Table/./node_modules/css-loader/lib/css-base.js","webpack://Table/./node_modules/style-loader/lib/addStyles.js","webpack://Table/./src/imageUpload.js","webpack://Table/./src/img/chevron-down.svg","webpack://Table/./src/plugin.js","webpack://Table/./src/tableConstructor.js","webpack://Table/./src/styles/table-constructor.scss?d91f","webpack://Table/./src/styles/table-constructor.scss","webpack://Table/./node_modules/style-loader/lib/urls.js","webpack://Table/./src/img/image-upload.svg","webpack://Table/./src/img/image-delete.svg","webpack://Table/./src/styles/image-upload.scss?94a5","webpack://Table/./src/styles/image-upload.scss","webpack://Table/./src/styles/table.scss?5c6f","webpack://Table/./src/styles/table.scss","webpack://Table/./src/img/toolboxIcon.svg","webpack://Table/./src/img/border.svg"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","_isNotMissed","elem","tagName","cssClasses","attrs","children","document","createElement","length","classList","add","setAttribute","appendChild","getCoords","rect","getBoundingClientRect","y1","Math","floor","top","pageYOffset","x1","left","pageXOffset","x2","right","y2","bottom","getSideByCoords","coords","x","y","side","sizeArea","turnTdIntoTh","cell","th","rowSpan","colSpan","className","style","setProperty","display","firstChild","parentNode","replaceChild","turnThIntoTd","td","hideCell","querySelector","TableCSS","inputField","contentEditable","showHiddenCell","removeProperty","getCaretCharacterOffsetWithin","element","sel","caretOffset","doc","ownerDocument","win","defaultView","parentWindow","getSelection","rangeCount","range","getRangeAt","preCaretRange","cloneRange","selectNodeContents","setEnd","endContainer","endOffset","toString","selection","type","textRange","createRange","preCaretTextRange","body","createTextRange","moveToElementText","setEndPoint","text","CSS","Resize","table","e","items","querySelectorAll","target","columnCount","rows","cells","parentCellColIndex","closest","cellIndex","resizeStickIndex","startX","clientX","resizeStick","width","offsetWidth","isLastResizeStick","getWidthCols","w1","w2","widthFirst","widthSecond","cursor","preventDefault","stopPropagation","move","delta","getCols","first","second","cols","colgroup","col","Number","parseFloat","parseWidth","this","init","addEventListener","onDrag","onDragEnd","onDragStart","SelectLine","contains","getDirection","index","getIndex","forEach","remove","removeColumn","removeRow","direction","onClick","onMouseEnter","onMouseLeave","CreateLine","plusButton","line","parent","addColumn","addRow","COLORS","CellMenu","config","api","_colors","colors","_init","_fillCellMenu","openCellMenuButton","iconContainer","iconBox","innerHTML","chevronDown","_handleMouseDown","_handleCellMenuButtonClick","container","visibility","option","textContent","i18n","mergeOption","mergeCells","unmergeOption","unmerge","addColumnOnRight","addRowBelow","event","focusedCell","selectedCell","selectedCols","row","selectedRows","rowIndex","colorOption","colorPalette","colorBlock","color","dataset","hideCellMenu","backgroundColor","deselectCells","j","toggleRowHeaderOption","toggleFirstRowHeader","toggleColHeaderOption","toggleFirstColHeader","colorPickerButton","_createColorPickerButton","toggleFirstRowHeaderButton","_createToggleFirstRowHeaderButton","toggleFirstColHeaderButton","_createToggleFirstColHeaderButton","addColumnOnRightButton","_createAddColumnOnRightButton","addRowBelowButton","_createAddRowBelow","mergeButton","_createMergeButton","unmergeButton","_createUnmergeButton","rowRemoveButton","_createRowRemoveButton","colRemoveButton","_createColRemoveButton","_cellMenuInner","isMergePossible","checkIfMergePossible","isCurrentCellMerged","isToggleRowHeaderPossible","isToggleColHeaderPossible","isRowHeaderOn","rowHeaderOn","isColHeaderOn","colHeaderOn","disabled","cellMenuInner","cellMenu","_catchClickEventDelegation","_changeCellColor","_showColorPalette","_hideColorPalette","Shortcuts","_guardEventDelegation","execCommand","caretPosition","upperCell","upperCellInput","searchMainMergedCell","focus","getPropertyValue","caret","setToPreviousBlock","setToNextBlock","belowCell","belowCellInput","containerReadOnly","wrapper","area","addColumnButton","addRowButton","Table","readOnly","resize","createElem","selectLine","_table","fillButtons","arr","CSSSelectLine","elem1","_numberOfColumns","_numberOfRows","_element","_createTableWrapper","createLine","imageUpload","ImageUpload","shortcuts","_hangEvents","span","insertBefore","data","newRow","insertRow","isFirstRow","isSecondRow","removeButtons","isHeader","bgColor","colspan","rowspan","newCell","insertCell","_fillCell","updateButtons","insertCol","isSelectedCellMerged","edgeIndex","fillCell","cellInColumn","isInvisibleCell","isMainMergedCell","mainMergedCell","isOnSameRowWithMainCell","colIndex","Array","from","filter","find","mainCell","mainCellRowIndex","mainCellColindex","mainCellMaxRowIndex","mainCellMaxColIndex","k","deleteCell","leftCell","_removeInvisibleRows","removeCol","_fillRow","isFirstColumn","isOnSameColumnWithMainCell","selectedRow","cellBelow","cellInUpperRow","everyCell","selectedCells","topLeftCell","bottomRightCell","everySelectedCells","visibleSelectedCells","firstRow","_selectedCell","invisibleRows","every","push","content","_createContentEditableArea","_focusEditField","_blurEditField","_shortcutKeys","_mouseDownOnCell","_mouseEnterInDetectArea","CellMenuCSS","handleArrowDownKeyPress","handleArrowUpKeyPress","handleTabKeyPress","handleEnterKeyPress","button","startRowIndex","startColIndex","currentCell","handleMouseMove","cellBelowMousePointer","elementFromPoint","clientY","currentRowIndex","currentColIndex","selectCells","isLastCellMerged","additionalRow","additionalCol","cellsInRow","handleMouseUp","removeEventListener","coordsCell","pageX","pageY","dispatchEvent","CustomEvent","detail","bubbles","useSourceMap","list","map","item","cssMapping","btoa","sourceMapping","sourceMap","unescape","encodeURIComponent","JSON","stringify","sourceURLs","sources","source","sourceRoot","concat","join","cssWithMappingToString","mediaQuery","alreadyImportedModules","id","fn","memo","stylesInDom","isOldIE","all","atob","apply","arguments","getTarget","getElement","styleTarget","HTMLIFrameElement","contentDocument","head","singleton","singletonCounter","stylesInsertedAtTop","fixUrls","addStylesToDom","styles","options","domStyle","refs","parts","addStyle","listToStyles","newStyles","base","part","css","media","insertStyleElement","insertInto","Error","lastStyleElementInsertedAtTop","insertAt","nextSibling","before","removeStyleElement","removeChild","idx","indexOf","splice","createStyleElement","undefined","nonce","getNonce","addAttrs","el","keys","obj","update","result","transform","default","styleIndex","applyToSingletonTag","URL","createObjectURL","revokeObjectURL","Blob","link","rel","createLinkElement","updateLink","href","applyToTag","newObj","DEBUG","newList","mayRemove","textStore","replaceText","replacement","Boolean","styleSheet","cssText","cssNode","createTextNode","childNodes","autoFixUrls","convertToAbsoluteUrls","blob","oldSrc","imageUploadIcon","require","imageDeleteIcon","imageUploadButton","imageUploadButtonVisible","image","buttonDelete","fileInput","Button","title","buttonText","onChange","visible","offsetTop","offsetHeight","offsetLeft","setTimeout","src","replaceWith","X","removeImage","files","onUploadImage","url","createImage","fd","FormData","append","fetch","method","then","json","TableConstructor","svgIcon","borderIcon","borderActive","toggleBorderButton","toggle","_CSS","settingsButtonActive","_tableConstructor","withBorder","input","settingsButton","settings","br","mark","icon","htmlElement","toolsContent","rowData","trim","holder","active","toggleBorder","editor","_drawTable","console","log","_container","block","_hoveredCell","_hoveredCellSide","isDataValid","isArray","contentRows","contentCols","configRows","parseInt","configCols","drawTableFromData","locals","location","baseUrl","protocol","host","currentDir","pathname","replace","fullMatch","origUrl","newUrl","unquotedOrigUrl","$1","test"],"mappings":"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","file":"bundle.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Table\"] = factory();\n\telse\n\t\troot[\"Table\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n","import { CSS as TableCSS } from \"./table\"\n\n/**\n * Checks the item is not missed or messed\n * @param {object|string[]|Element[]|HTMLElement|string} elem - element\n * @returns {boolean} true if element is correct\n * @private\n */\nfunction _isNotMissed(elem) {\n  return !(elem === undefined || elem === null)\n}\n\n/**\n * Create DOM element with set parameters\n * @param {string} tagName - Html tag of the element to be created\n * @param {string[]} cssClasses - Css classes that must be applied to an element\n * @param {object} attrs - Attributes that must be applied to the element\n * @param {Element[]} children - child elements of creating element\n * @returns {HTMLElement} the new element\n */\nexport function create(tagName, cssClasses = null, attrs = null, children = null) {\n  const elem = document.createElement(tagName)\n\n  if (_isNotMissed(cssClasses)) {\n    for (let i = 0; i < cssClasses.length; i++) {\n      if (_isNotMissed(cssClasses[i])) {\n        elem.classList.add(cssClasses[i])\n      }\n    }\n  }\n  if (_isNotMissed(attrs)) {\n    for (let key in attrs) {\n      elem.setAttribute(key, attrs[key])\n    }\n  }\n  if (_isNotMissed(children)) {\n    for (let i = 0; i < children.length; i++) {\n      if (_isNotMissed(children[i])) {\n        elem.appendChild(children[i])\n      }\n    }\n  }\n  return elem\n}\n\n/**\n * Get item position relative to document\n * @param {HTMLElement} elem - item\n * @returns {{x1: number, y1: number, x2: number, y2: number}} coordinates of the upper left (x1,y1) and lower right(x2,y2) corners\n */\nexport function getCoords(elem) {\n  const rect = elem.getBoundingClientRect()\n\n  return {\n    y1: Math.floor(rect.top + window.pageYOffset),\n    x1: Math.floor(rect.left + window.pageXOffset),\n    x2: Math.floor(rect.right + window.pageXOffset),\n    y2: Math.floor(rect.bottom + window.pageYOffset),\n  }\n}\n\n/**\n * Recognizes which side of the container  is closer to (x,y)\n * @param {{x1: number, y1: number, x2: number, y2: number}} coords - coords of container\n * @param x - x coord\n * @param y - y coord\n * @return {string}\n */\nexport function getSideByCoords(coords, x, y) {\n  let side\n  const sizeArea = 10\n\n  // a point is close to the boundary if the distance between them is less than the allowed distance.\n  // +1px on each side due to fractional pixels\n  if (x - coords.x1 >= -1 && x - coords.x1 <= sizeArea + 1) {\n    side = \"left\"\n  }\n  if (coords.x2 - x >= -1 && coords.x2 - x <= sizeArea + 1) {\n    side = \"right\"\n  }\n  if (y - coords.y1 >= -1 && y - coords.y1 <= sizeArea + 1) {\n    side = \"top\"\n  }\n  if (coords.y2 - y >= -1 && coords.y2 - y <= sizeArea + 1) {\n    side = \"bottom\"\n  }\n\n  return side\n}\n\n/**\n * td 엘리먼트를 th 엘리먼트로 변경한다\n * @param cell - TD Element\n */\nexport function turnTdIntoTh(cell) {\n  const th = document.createElement(\"th\")\n\n  th.setAttribute(\"rowspan\", cell.rowSpan)\n  th.setAttribute(\"colspan\", cell.colSpan)\n  th.setAttribute(\"class\", cell.className)\n  th.style.setProperty(\"display\", cell.style.display === \"none\" ? \"none\" : null)\n\n  while (cell.firstChild) {\n    th.appendChild(cell.firstChild)\n  }\n\n  cell.parentNode.replaceChild(th, cell)\n}\n\n/**\n * th 엘리먼트를 td 엘리먼트로 변경한다\n * @param cell - TH Element\n */\nexport function turnThIntoTd(cell) {\n  const td = document.createElement(\"td\")\n\n  td.setAttribute(\"rowspan\", cell.rowSpan)\n  td.setAttribute(\"colspan\", cell.colSpan)\n  td.setAttribute(\"class\", cell.className)\n  td.style.setProperty(\"display\", cell.style.display === \"none\" ? \"none\" : null)\n\n  while (cell.firstChild) {\n    td.appendChild(cell.firstChild)\n  }\n\n  cell.parentNode.replaceChild(td, cell)\n}\n\nexport function hideCell(cell) {\n  cell.colSpan = 1\n  cell.rowSpan = 1\n  cell.style.display = \"none\"\n  cell.querySelector(\".\" + TableCSS.inputField).contentEditable = false\n}\n\nexport function showHiddenCell(cell) {\n  cell.colSpan = 1\n  cell.rowSpan = 1\n  cell.style.removeProperty(\"display\")\n  cell.querySelector(\".\" + TableCSS.inputField).contentEditable = true\n}\n\n/**\n * 커서의 인덱스를 반환합니다.\n * https://stackoverflow.com/questions/4811822/get-a-ranges-start-and-end-offsets-relative-to-its-parent-container/4812022#4812022\n *\n * @param {HTMLElement} element\n * @returns Number\n */\nexport function getCaretCharacterOffsetWithin(element) {\n  var caretOffset = 0\n  var doc = element.ownerDocument || element.document\n  var win = doc.defaultView || doc.parentWindow\n  var sel\n  if (typeof win.getSelection != \"undefined\") {\n    sel = win.getSelection()\n    if (sel.rangeCount > 0) {\n      var range = win.getSelection().getRangeAt(0)\n      var preCaretRange = range.cloneRange()\n      preCaretRange.selectNodeContents(element)\n      preCaretRange.setEnd(range.endContainer, range.endOffset)\n      caretOffset = preCaretRange.toString().length\n    }\n  } else if ((sel = doc.selection) && sel.type != \"Control\") {\n    var textRange = sel.createRange()\n    var preCaretTextRange = doc.body.createTextRange()\n    preCaretTextRange.moveToElementText(element)\n    preCaretTextRange.setEndPoint(\"EndToEnd\", textRange)\n    caretOffset = preCaretTextRange.text.length\n  }\n  return caretOffset\n}\n","import { create } from \"./documentUtils\"\n\nconst CSS = {\n  resizedColumn: \"tc-table__resize_column\",\n}\n\nconst MIN_COL_WIDTH = 50\n\nexport class Resize {\n  constructor(table) {\n    this.table = table\n    this.resizeStick = null\n    this.resizeStickIndex = 0\n    this.isLastResizeStick = false\n    this.startX = 0\n    this.x = 0\n\n    this.init()\n  }\n\n  init() {\n    document.addEventListener(\"mousemove\", this.onDrag, false)\n    document.addEventListener(\"mouseup\", this.onDragEnd, false)\n  }\n\n  createElem(cell) {\n    if (!cell.querySelector(`.${CSS.resizedColumn}`)) {\n      const elem = create(\"div\", [CSS.resizedColumn])\n      elem.addEventListener(\"mousedown\", this.onDragStart, false)\n      cell.appendChild(elem)\n    }\n  }\n\n  getIndex = (e) => {\n    const items = this.table.body.querySelectorAll(`.${CSS.resizedColumn}`)\n    for (let i = 0; i < items.length; i += 1) {\n      if (items[i] === e.target) {\n        return i\n      }\n    }\n    return -1\n  }\n\n  onDragStart = (e) => {\n    const columnCount = this.table.body.rows[0].cells.length\n    const parentCellColIndex = e.target.closest(\"td,th\").cellIndex\n    const resizeStickIndex = parentCellColIndex - 1\n\n    this.startX = e.clientX\n    this.resizeStick = e.target\n    this.resizeStickIndex = resizeStickIndex\n    this.width = this.table.body.offsetWidth\n\n    if (columnCount === parentCellColIndex + 1) {\n      this.isLastResizeStick = true\n    }\n\n    const [w1, w2] = this.getWidthCols()\n\n    // 왼쪽 셀 너비\n    this.widthFirst = w1\n    // 오른쪽 셀 너비\n    this.widthSecond = w2\n\n    document.body.style.cursor = \"col-resize\"\n\n    e.preventDefault && e.preventDefault()\n    e.stopPropagation && e.stopPropagation()\n  }\n\n  onDrag = (e) => {\n    if (this.resizeStick) {\n      this.move(e.clientX - this.startX)\n    }\n  }\n\n  onDragEnd = () => {\n    this.resizeStick = null\n    this.isLastResizeStick = false\n    document.body.style.cursor = \"auto\"\n  }\n\n  move = (delta) => {\n    const [first, second] = this.getCols()\n    const w1 = this.widthFirst + delta\n    const w2 = this.widthSecond - delta\n\n    if (w1 >= MIN_COL_WIDTH) {\n      first.style.width = `${w1}px`\n\n      if (w1 >= MIN_COL_WIDTH && w2 >= MIN_COL_WIDTH) {\n        second.style.width = `${w2}px`\n      }\n    }\n  }\n\n  getCols = () => {\n    const cols = this.table.colgroup.children\n    const first = cols[this.resizeStickIndex]\n    const second = cols[this.resizeStickIndex + 1]\n    return [first, second]\n  }\n\n  parseWidth = (col) => {\n    const width = col.style.width || col.getBoundingClientRect().width\n    return Number.parseFloat(width)\n  }\n\n  getWidthCols = () => {\n    const [first, second] = this.getCols()\n    return [this.parseWidth(first), this.parseWidth(second)]\n  }\n}\n","import { create } from \"./documentUtils\"\n\nexport const CSS = {\n  selectLineCol: \"tc-table__select_line_col\",\n  selectLineRow: \"tc-table__select_line_row\",\n  trRemove: \"tc-table__tr_remove\",\n  tdRemove: \"tc-table__td_remove\",\n}\n\nexport class SelectLine {\n  constructor(table) {\n    this.table = table\n  }\n\n  createElem(cell, direction = 0) {\n    const className = direction === 0 ? CSS.selectLineCol : CSS.selectLineRow\n\n    if (!cell.querySelector(`.${className}`)) {\n      const elem = create(\"div\", [className])\n      elem.addEventListener(\"click\", this.onClick, false)\n      elem.addEventListener(\"mouseenter\", this.onMouseEnter, false)\n      elem.addEventListener(\"mouseleave\", this.onMouseLeave, false)\n      cell.appendChild(elem)\n    }\n  }\n\n  getDirection = (e) => {\n    if (e.target.classList.contains(CSS.selectLineCol)) return 0\n    return 1\n  }\n\n  onMouseEnter = (e) => {\n    // 가로 줄\n    if (this.getDirection(e) === 0) {\n      const index = this.getIndex(e)\n      for (let i = 0; i < this.table.body.rows.length; i += 1) {\n        if (this.table.body.rows[i].children[index]) {\n          this.table.body.rows[i].children[index].classList.add(CSS.tdRemove)\n        }\n      }\n      // 세로 줄\n    } else {\n      const tr = e.target.closest(\"tr\")\n      tr.classList.add(CSS.trRemove)\n    }\n  }\n\n  onMouseLeave = (e) => {\n    if (e.target) {\n      if (this.getDirection(e) === 0) {\n        const tds = this.table.body.querySelectorAll(`.${CSS.tdRemove}`)\n        tds.forEach((td) => {\n          td.classList.remove(CSS.tdRemove)\n        })\n      } else {\n        const tr = e.target.closest(\"tr\")\n        tr.classList.remove(CSS.trRemove)\n      }\n    }\n  }\n\n  getIndex = (e) => {\n    const items = this.table.body.querySelectorAll(`.${e.target.className}`)\n    for (let i = 0; i < items.length; i += 1) {\n      if (items[i] === e.target) {\n        return i\n      }\n    }\n    return -1\n  }\n\n  onClick = (e) => {\n    const index = this.getIndex(e)\n    if (this.getDirection(e) === 0) {\n      this.table.removeColumn(index)\n    } else {\n      this.table.removeRow(index)\n    }\n  }\n}\n","import { create } from \"./documentUtils\"\n\nexport const CSS = {\n  addColumn: \"tc-table__add_column\",\n  addRow: \"tc-table__add_row\",\n}\n\nexport class CreateLine {\n  constructor(table) {\n    this.table = table\n  }\n\n  /**\n   * @private\n   * @returns {HTMLElement} - the create col/row\n   */\n  createElem = (cell, direction = 0) => {\n    const className = [CSS.addColumn, CSS.addRow][direction]\n    if (!cell.querySelector(`.${className}`)) {\n      const plusButton = create(\"div\")\n      plusButton.addEventListener(\"click\", this.onClick)\n\n      const line = create(\"div\", [className], null, [plusButton, create(\"div\")])\n\n      cell.appendChild(line)\n      return line\n    }\n  }\n\n  getDirection = (elem) => {\n    if (elem.classList.contains(CSS.addColumn)) return 0\n    return 1\n  }\n\n  getIndex = (elem) => {\n    const items = this.table.body.querySelectorAll(`.${elem.className}`)\n    for (let i = 0; i < items.length; i += 1) {\n      if (items[i] === elem) {\n        return i\n      }\n    }\n    return -1\n  }\n\n  onClick = (e) => {\n    const parent = e.target.parentNode\n    const direction = this.getDirection(parent)\n    const index = this.getIndex(parent)\n\n    if (direction === 0) {\n      this.table.addColumn(index)\n    } else {\n      this.table.addRow(index)\n    }\n  }\n}\n","import { create } from \"./documentUtils\"\nimport chevronDown from \"./img/chevron-down.svg\"\n\nconst COLORS = [\n  \"#ffffff\",\n  \"#e0ebfd\",\n  \"#eafbfe\",\n  \"#e8fbf0\",\n  \"#fefae8\",\n  \"#fcece7\",\n  \"#e9e6fd\",\n  \"#f4f5f7\",\n  \"#b9d4fb\",\n  \"#c1f3fd\",\n  \"#bbf3d3\",\n  \"#fcf0ba\",\n  \"#f5c0b0\",\n  \"#beb7ee\",\n  \"#b4bac4\",\n  \"#5f9af8\",\n  \"#93dfef\",\n  \"#7cd5a7\",\n  \"#f6c544\",\n  \"#f0957a\",\n  \"#978ed4\",\n]\n\nexport class CellMenu {\n  constructor(table, config, api) {\n    this.table = table\n    this._colors = config.colors || COLORS\n    this.api = api\n\n    this._init()\n    this._fillCellMenu()\n  }\n\n  createElem(cell) {\n    const openCellMenuButton = create(\"button\", [CSS.openCellMenuButton])\n    const iconContainer = create(\"div\", [CSS.iconBox])\n\n    iconContainer.innerHTML = chevronDown\n\n    openCellMenuButton.appendChild(iconContainer)\n    openCellMenuButton.addEventListener(\"mousedown\", this._handleMouseDown.bind(this))\n    openCellMenuButton.addEventListener(\"click\", this._handleCellMenuButtonClick.bind(this))\n    cell.appendChild(openCellMenuButton)\n  }\n\n  hideCellMenu() {\n    this.container.style.visibility = \"hidden\"\n\n    this.table.body.querySelectorAll(\".\" + CSS.iconBox).forEach((iconBox) => {\n      iconBox.classList.remove(\"activated\")\n    })\n  }\n\n  _createMergeButton() {\n    const option = document.createElement(\"button\")\n\n    option.textContent = this.api.i18n.t(\"Merge Cells\")\n\n    option.classList.add(CSS.option)\n    option.classList.add(CSS.mergeOption)\n    option.addEventListener(\"click\", this.mergeCells.bind(this))\n\n    return option\n  }\n\n  _createUnmergeButton() {\n    const option = document.createElement(\"button\")\n\n    option.textContent = this.api.i18n.t(\"Divide Cell\")\n\n    option.classList.add(CSS.option)\n    option.classList.add(CSS.unmergeOption)\n    option.addEventListener(\"click\", this.unmerge.bind(this))\n\n    return option\n  }\n\n  _createAddColumnOnRightButton() {\n    const option = document.createElement(\"button\")\n\n    option.textContent = this.api.i18n.t(\"Insert Column On Right\")\n\n    option.classList.add(CSS.option)\n    option.addEventListener(\"click\", this.addColumnOnRight.bind(this))\n\n    return option\n  }\n\n  _createAddRowBelow() {\n    const option = document.createElement(\"button\")\n\n    option.textContent = this.api.i18n.t(\"Insert Row Below\")\n\n    option.classList.add(CSS.option)\n    option.addEventListener(\"click\", this.addRowBelow.bind(this))\n\n    return option\n  }\n\n  _createColRemoveButton() {\n    const option = document.createElement(\"button\")\n\n    const removeSelectedCols = (event) => {\n      const focusedCell = this.selectedCell\n      const selectedCols = this.selectedCols\n\n      if (selectedCols.length === 0) {\n        this.removeColumn(focusedCell.cellIndex)\n        return\n      }\n\n      selectedCols.forEach((row, i) => {\n        this.removeColumn(row - i)\n      })\n    }\n\n    option.textContent = this.api.i18n.t(\"Remove Column\")\n\n    option.classList.add(CSS.option)\n    option.addEventListener(\"click\", removeSelectedCols.bind(this))\n\n    return option\n  }\n\n  _createRowRemoveButton() {\n    const option = document.createElement(\"button\")\n\n    const removeSelectedRows = (event) => {\n      const focusedCell = this.selectedCell\n      const selectedRows = this.selectedRows\n\n      if (selectedRows.length === 0) {\n        this.removeRow(focusedCell.parentNode.rowIndex)\n        return\n      }\n\n      selectedRows.forEach((row, i) => {\n        this.removeRow(row - i)\n      })\n    }\n\n    // 삭제할 행을 표시해주는 기능을 추가한다\n    // https://stackoverflow.com/questions/49106088/changing-pseudo-element-style-from-javascript\n    const highlightCells = (event) => {\n      // const focusedCell = this.selectedCell;\n      // const selectedCells = this._table.querySelectorAll('.selected');\n      // if (selectedCells.length === 0) {\n      //   focusedCell.parentNode.classList.add(SelectLineCSS.trRemove);\n      //   return;\n      // }\n      // const topLeftRow = selectedCells[0].parentNode.rowIndex;\n      // const bottomRightRow = selectedCells[selectedCells.length - 1].parentNode.rowIndex;\n      // for (let i = topLeftRow; i <= bottomRightRow; i++) {\n      //   this._table.rows[i].classList.add(SelectLineCSS.trRemove);\n      // }\n    }\n\n    option.textContent = this.api.i18n.t(\"Remove Row\")\n\n    option.classList.add(CSS.option)\n    option.addEventListener(\"click\", removeSelectedRows.bind(this))\n    // option.addEventListener(\"mouseenter\", highlightCells.bind(this))\n\n    return option\n  }\n\n  _createColorPickerButton() {\n    const option = document.createElement(\"button\")\n\n    option.textContent = this.api.i18n.t(\"Cell Color\")\n\n    option.classList.add(CSS.option)\n    option.classList.add(CSS.colorOption)\n\n    option.addEventListener(\"mouseenter\", (event) => {\n      const { top, left } = option.getBoundingClientRect()\n      const { width } = this.colorPalette.getBoundingClientRect()\n\n      this.colorPalette.style.top = `${top}px`\n      this.colorPalette.style.left = `${left - width}px`\n      this.colorPalette.style.visibility = \"visible\"\n    })\n\n    option.addEventListener(\"mouseleave\", (event) => {\n      this.colorPalette.style.visibility = \"hidden\"\n    })\n\n    return option\n  }\n\n  _changeCellColor(event) {\n    if (event.target.closest(\".\" + CSS.colorBlock)) {\n      const color =\n        event.target.dataset.color === this._colors[0] ? null : event.target.dataset.color\n      const selectedRows = this.table.selectedRows\n      const selectedCols = this.table.selectedCols\n      const selectedCell = this.table.selectedCell\n\n      this.colorPalette.style.visibility = \"hidden\"\n      this.hideCellMenu()\n\n      if (!selectedRows.length && !selectedCols.length) {\n        selectedCell.style.backgroundColor = color\n        this.table.deselectCells()\n        return\n      }\n\n      for (let i = selectedRows[0]; i <= selectedRows[selectedRows.length - 1]; i++) {\n        for (let j = selectedCols[0]; j <= selectedCols[selectedCols.length - 1]; j++) {\n          const cell = this.table.body.rows[i].cells[j]\n          cell.style.backgroundColor = color\n        }\n      }\n\n      this.table.deselectCells()\n    }\n  }\n\n  _hideColorPalette() {\n    this.colorPalette.style.visibility = \"hidden\"\n  }\n\n  _showColorPalette() {\n    this.colorPalette.style.visibility = \"visible\"\n  }\n\n  _createToggleFirstRowHeaderButton() {\n    const option = document.createElement(\"button\")\n\n    option.textContent = this.api.i18n.t(\"Header Row\")\n\n    option.classList.add(CSS.option)\n    option.classList.add(CSS.toggleRowHeaderOption)\n\n    option.addEventListener(\"click\", this.toggleFirstRowHeader.bind(this))\n\n    return option\n  }\n\n  _createToggleFirstColHeaderButton() {\n    const option = document.createElement(\"button\")\n\n    option.textContent = this.api.i18n.t(\"Header Column\")\n\n    option.classList.add(CSS.option)\n    option.classList.add(CSS.toggleColHeaderOption)\n\n    option.addEventListener(\"click\", this.toggleFirstColHeader.bind(this))\n\n    return option\n  }\n\n  _fillCellMenu() {\n    const colorPickerButton = this._createColorPickerButton()\n    const toggleFirstRowHeaderButton = this._createToggleFirstRowHeaderButton.call(this.table)\n    const toggleFirstColHeaderButton = this._createToggleFirstColHeaderButton.call(this.table)\n    const addColumnOnRightButton = this._createAddColumnOnRightButton.call(this.table)\n    const addRowBelowButton = this._createAddRowBelow.call(this.table)\n    const mergeButton = this._createMergeButton.call(this.table)\n    const unmergeButton = this._createUnmergeButton.call(this.table)\n    const rowRemoveButton = this._createRowRemoveButton.call(this.table)\n    const colRemoveButton = this._createColRemoveButton.call(this.table)\n\n    this._cellMenuInner.appendChild(colorPickerButton)\n    this._cellMenuInner.appendChild(toggleFirstRowHeaderButton)\n    this._cellMenuInner.appendChild(toggleFirstColHeaderButton)\n    this._cellMenuInner.appendChild(addColumnOnRightButton)\n    this._cellMenuInner.appendChild(addRowBelowButton)\n    this._cellMenuInner.appendChild(mergeButton)\n    this._cellMenuInner.appendChild(unmergeButton)\n    this._cellMenuInner.appendChild(rowRemoveButton)\n    this._cellMenuInner.appendChild(colRemoveButton)\n  }\n\n  /**\n   * 메뉴 창 닫기를 방지합니다.\n   *\n   * @param {MouseEvent} event\n   */\n  _handleMouseDown(event) {\n    event.preventDefault()\n  }\n\n  _handleCellMenuButtonClick(event) {\n    const openCellMenuButton = event.target.closest(\".\" + CSS.openCellMenuButton)\n    const iconBox = openCellMenuButton.querySelector(\".\" + CSS.iconBox)\n    const mergeOption = this.container.querySelector(\".\" + CSS.mergeOption)\n    const unmergeOption = this.container.querySelector(\".\" + CSS.unmergeOption)\n    const toggleRowHeaderOption = this.container.querySelector(\".\" + CSS.toggleRowHeaderOption)\n    const toggleColHeaderOption = this.container.querySelector(\".\" + CSS.toggleColHeaderOption)\n    const { top, right } = iconBox.getBoundingClientRect()\n    const isMergePossible = this.table.checkIfMergePossible.call(this.table)\n    const isCurrentCellMerged =\n      this.table.selectedCell.colSpan > 1 || this.table.selectedCell.rowSpan > 1\n    const isToggleRowHeaderPossible = this.table.selectedCell.parentNode.rowIndex === 0\n    const isToggleColHeaderPossible = this.table.selectedCell.cellIndex === 0\n\n    iconBox.classList.add(\"activated\")\n\n    this.container.style.top = `${top}px`\n    this.container.style.left = `${right + 4}px`\n    this.container.style.visibility = \"visible\"\n\n    if (isToggleRowHeaderPossible) {\n      toggleRowHeaderOption.style.display = \"flex\"\n\n      this.table.isRowHeaderOn\n        ? toggleRowHeaderOption.classList.add(CSS.rowHeaderOn)\n        : toggleRowHeaderOption.classList.remove(CSS.rowHeaderOn)\n    } else {\n      toggleRowHeaderOption.style.display = \"none\"\n    }\n\n    if (isToggleColHeaderPossible) {\n      toggleColHeaderOption.style.display = \"flex\"\n\n      this.table.isColHeaderOn\n        ? toggleColHeaderOption.classList.add(CSS.colHeaderOn)\n        : toggleColHeaderOption.classList.remove(CSS.colHeaderOn)\n    } else {\n      toggleColHeaderOption.style.display = \"none\"\n    }\n\n    if (isMergePossible) {\n      mergeOption.disabled = false\n    } else {\n      mergeOption.disabled = true\n    }\n\n    if (isCurrentCellMerged) {\n      unmergeOption.style.display = \"flex\"\n    } else {\n      unmergeOption.style.display = \"none\"\n    }\n  }\n\n  _init() {\n    const cellMenuInner = document.createElement(\"div\")\n    cellMenuInner.classList.add(CSS.cellMenuInner)\n\n    const cellMenu = document.createElement(\"div\")\n    cellMenu.appendChild(cellMenuInner)\n    cellMenu.classList.add(CSS.cellMenu)\n\n    const colorPalette = document.createElement(\"div\")\n    colorPalette.classList.add(CSS.colorPalette)\n\n    this._colors.forEach((color) => {\n      const colorBlock = document.createElement(\"figure\")\n      colorBlock.style.backgroundColor = color\n      colorBlock.classList.add(CSS.colorBlock)\n      colorBlock.setAttribute(\"data-color\", color)\n      colorPalette.appendChild(colorBlock)\n    })\n\n    this.container = cellMenu\n    this.colorPalette = colorPalette\n    this._cellMenuInner = cellMenuInner\n\n    this._cellMenuInner.addEventListener(\"click\", this._catchClickEventDelegation.bind(this))\n    this.colorPalette.addEventListener(\"click\", this._changeCellColor.bind(this))\n    this.colorPalette.addEventListener(\"mouseenter\", this._showColorPalette.bind(this))\n    this.colorPalette.addEventListener(\"mouseleave\", this._hideColorPalette.bind(this))\n  }\n\n  _catchClickEventDelegation(event) {\n    if (event.target.classList.contains(CSS.option)) {\n      this.hideCellMenu()\n    }\n  }\n}\n\nexport const CSS = {\n  openCellMenuButton: \"tc-table__option_button\",\n  iconBox: \"tc-table__option_button__inner_box\",\n  cellMenu: \"tc-table__option_table\",\n  cellMenuInner: \"tc-table__option_table__inner\",\n  option: \"tc-table__option_table__inner__option\",\n  mergeOption: \"merge-option\",\n  unmergeOption: \"unmerge-option\",\n  colorOption: \"color-option\",\n  colorPalette: \"color-palette\",\n  colorBlock: \"color-block\",\n  toggleRowHeaderOption: \"toggle-row-header-option\",\n  toggleColHeaderOption: \"toggle-col-header-option\",\n  rowHeaderOn: \"row-header-on\",\n  colHeaderOn: \"col-header-on\",\n}\n","import { getCaretCharacterOffsetWithin } from \"./documentUtils\"\nimport { CSS } from \"./table\"\n\nexport class Shortcuts {\n  constructor(table, api) {\n    this.table = table\n    this.api = api\n  }\n\n  /**\n   *\n   * @param {KeyboardEvent} event\n   */\n  handleEnterKeyPress(event) {\n    this._guardEventDelegation(event)\n    event.stopPropagation()\n\n    document.execCommand(\"insertLineBreak\")\n    event.preventDefault()\n  }\n\n  /**\n   *\n   * @param {KeyboardEvent} event\n   */\n  handleTabKeyPress(event) {\n    this._guardEventDelegation(event)\n    event.stopPropagation()\n  }\n\n  /**\n   *\n   * @param {KeyboardEvent} event\n   */\n  handleArrowUpKeyPress(event) {\n    this._guardEventDelegation(event)\n    event.stopPropagation()\n\n    const table = this.table.body\n    const selectedCell = this.table.selectedCell\n    const inputField = selectedCell.querySelector(\".\" + CSS.inputField)\n    const caretPosition = getCaretCharacterOffsetWithin(inputField)\n\n    if (selectedCell.parentNode.rowIndex === 0) {\n      this.api.caret.setToPreviousBlock(\"end\", 0)\n      return\n    }\n\n    if (caretPosition === 0) {\n      const upperCell =\n        table.rows[selectedCell.parentNode.rowIndex - 1].cells[selectedCell.cellIndex]\n      const upperCellInput = upperCell.querySelector(\".\" + CSS.inputField)\n\n      if (upperCell.style.display === \"none\") {\n        const mainMergedCell = this.table.searchMainMergedCell(upperCell)\n        const mainMergedCellInput = mainMergedCell.querySelector(\".\" + CSS.inputField)\n\n        mainMergedCellInput.focus()\n      }\n\n      if (!upperCell.style.getPropertyValue(\"display\")) {\n        upperCellInput.focus()\n      }\n    }\n  }\n\n  /**\n   *\n   * @param {KeyboardEvent} event\n   */\n  handleArrowDownKeyPress(event) {\n    this._guardEventDelegation(event)\n    event.stopPropagation()\n\n    const table = this.table.body\n    const selectedCell = this.table.selectedCell\n    const inputField = selectedCell.querySelector(\".\" + CSS.inputField)\n    const caretPosition = getCaretCharacterOffsetWithin(inputField)\n    const isCurrentCellAtBottom =\n      selectedCell.parentNode.rowIndex + selectedCell.rowSpan - 1 === table.rows.length - 1\n\n    if (isCurrentCellAtBottom) {\n      this.api.caret.setToNextBlock(\"start\", 0)\n      return\n    }\n\n    if (caretPosition === inputField.textContent.length) {\n      const belowCell =\n        table.rows[selectedCell.parentNode.rowIndex + selectedCell.rowSpan].cells[\n          selectedCell.cellIndex\n        ]\n      const belowCellInput = belowCell.querySelector(\".\" + CSS.inputField)\n\n      if (belowCell.style.display === \"none\") {\n        const mainMergedCell = this.table.searchMainMergedCell(belowCell)\n        const mainMergedCellInput = mainMergedCell.querySelector(\".\" + CSS.inputField)\n\n        mainMergedCellInput.focus()\n      } else {\n        belowCellInput.focus()\n      }\n    }\n  }\n\n  /**\n   * @private\n   * @param {KeyboardEvent} event\n   */\n  _guardEventDelegation(event) {\n    if (!event.target.classList.contains(CSS.inputField)) {\n      return\n    }\n  }\n}\n","import {\n  create,\n  getCoords,\n  getSideByCoords,\n  turnTdIntoTh,\n  turnThIntoTd,\n  hideCell,\n  showHiddenCell,\n} from \"./documentUtils\"\nimport { Resize } from \"./resize\"\nimport { SelectLine, CSS as CSSSelectLine } from \"./selectLine\"\nimport { CreateLine } from \"./createLine\"\nimport { ImageUpload, CSS as imageUploadCSS } from \"./imageUpload\"\nimport \"./styles/table.scss\"\nimport { CellMenu, CSS as CellMenuCSS } from \"./cellMenu\"\nimport { Shortcuts } from \"./shortcuts\"\n\nexport const CSS = {\n  table: \"tc-table\",\n  inputField: \"tc-table__inp\",\n  cell: \"tc-table__cell\",\n  container: \"tc-table__container\",\n  containerReadOnly: \"tc-table__container_readonly\",\n  wrapper: \"tc-table__wrap\",\n  area: \"tc-table__area\",\n  addColumn: \"tc-table__add_column\",\n  addRow: \"tc-table__add_row\",\n  addColumnButton: \"tc-table__add_column_button\",\n  addRowButton: \"tc-table__add_row_button\",\n}\n\n/**\n * Generates and manages _table contents.\n */\nexport class Table {\n  /**\n   * Creates\n   *\n   * @param {boolean} readOnly - read-only mode flag\n   */\n  constructor(config, api, readOnly) {\n    this.api = api\n    this.readOnly = readOnly\n    this._numberOfColumns = 0\n    this._numberOfRows = 0\n\n    this._element = this._createTableWrapper()\n    this._table = this._element.querySelector(\"table\")\n    this.colgroup = this._table.querySelector(\"colgroup\")\n    this.selectedRows = []\n    this.selectedCols = []\n    this.isRowHeaderOn = false\n    this.isColHeaderOn = false\n\n    this.resize = new Resize(this)\n    this.selectLine = new SelectLine(this)\n    this.createLine = new CreateLine(this)\n    this.imageUpload = new ImageUpload(this)\n    this.cellMenu = new CellMenu(this, config, api)\n    this.shortcuts = new Shortcuts(this, api)\n\n    this._table.appendChild(this.cellMenu.container)\n    this._table.appendChild(this.cellMenu.colorPalette)\n\n    if (!this.readOnly) {\n      this._hangEvents()\n    }\n  }\n\n  deselectCells() {\n    const everyCell = this._table.querySelectorAll(\"td,th\")\n    everyCell.forEach((cell) => {\n      cell.classList.remove(\"selected\")\n    })\n  }\n\n  fillButtons = (cell, x, y) => {\n    if (this.readOnly) return\n\n    // column\n    if (y === 0) {\n      // this.createLine.createElem(cell)\n    }\n\n    if (x !== 0) {\n      // 여기서 너비조절 막대기 생성하는 중.\n      this.resize.createElem(cell)\n    }\n\n    // select line button\n    if (x === 0 || y === 0) {\n      this.selectLine.createElem(cell, Number(x === 0))\n      if (x === 0 && y === 0) {\n        this.selectLine.createElem(cell)\n      }\n    }\n\n    // row\n    if (x === 0) {\n      // this.createLine.createElem(cell, 1)\n    }\n  }\n\n  updateButtons = () => {\n    for (let i = 0; i < this._table.rows.length; i += 1) {\n      const row = this._table.rows[i]\n\n      for (let r = 0; r < row.children.length; r += 1) {\n        const cell = row.children[r]\n        this.fillButtons(cell, r, i)\n      }\n    }\n  }\n\n  removeButtons = (direction = 0) => {\n    const arr = [\n      [CSS.addColumn, CSSSelectLine.selectLineCol],\n      [CSS.addRow, CSSSelectLine.selectLineRow],\n    ]\n    arr[direction].forEach((className) => {\n      const elem1 = this._table.querySelectorAll(`.${className}`)\n      for (let i = 0; i < elem1.length; i += 1) {\n        elem1[i].remove()\n      }\n    })\n  }\n\n  insertCol(index) {\n    const col = create(\"col\", [], { span: 1 })\n\n    this.colgroup.insertBefore(col, this.colgroup.children[index])\n  }\n\n  removeCol(index) {\n    this.body.querySelector(\"colgroup\").children[index].remove()\n  }\n\n  drawTableFromData(data) {\n    const table = this._table\n    const { rows, colgroup } = data\n\n    rows.forEach((row, i) => {\n      const newRow = table.insertRow(i)\n      const isFirstRow = i === 0\n      const isSecondRow = i === 1\n\n      if (isFirstRow) {\n        this.removeButtons(0)\n      }\n      if (isFirstRow && row[1].isHeader) {\n        this.isRowHeaderOn = true\n      }\n      if (isSecondRow && row[0].isHeader) {\n        this.isColHeaderOn = true\n      }\n\n      row.forEach(({ text, bgColor, colspan, rowspan, display, isHeader }, i) => {\n        const newCell = newRow.insertCell(i)\n\n        this._fillCell(newCell)\n\n        newCell.colSpan = colspan\n        newCell.rowSpan = rowspan\n        newCell.style.backgroundColor = bgColor\n        newCell.querySelector(\".\" + CSS.inputField).innerHTML = text\n\n        if (isHeader) {\n          turnTdIntoTh(newCell)\n        }\n        if (display === false) {\n          newCell.style.display = \"none\"\n          newCell.querySelector(\".\" + CSS.inputField).contentEditable = false\n        }\n      })\n\n      this._numberOfRows++\n      this.updateButtons()\n    })\n\n    colgroup.forEach(({ span, width }, i) => {\n      if (i === 0) {\n        this.removeButtons(1)\n      }\n\n      this._numberOfColumns++\n      this.insertCol(i)\n      this.updateButtons()\n\n      this.colgroup.children[i].style.width = width\n      this.colgroup.children[i].span = span\n    })\n  }\n\n  /**\n   * Add column in table on index place\n   *\n   * @param {number} index - number in the array of columns, where new column to insert,-1 if insert at the end\n   */\n  addColumn(index = -1) {\n    this._numberOfColumns++\n    /** Add cell in each row */\n    const rows = this._table.rows\n\n    if (index === 0) {\n      this.removeButtons(1)\n    }\n\n    this.insertCol(index)\n    for (let i = 0; i < rows.length; i++) {\n      const cell = rows[i].insertCell(index)\n      cell.colSpan = 1\n      cell.rowSpan = 1\n      this._fillCell(cell)\n    }\n\n    if (!this.readOnly) {\n      this.updateButtons()\n    }\n  }\n\n  addColumnOnRight() {\n    const table = this._table\n    const isSelectedCellMerged = this.selectedCell.colSpan > 1 || this.selectedCell.rowSpan > 1\n    const edgeIndex = this.selectedCell.colSpan + this.selectedCell.cellIndex - 1\n    const index = isSelectedCellMerged ? edgeIndex : this.selectedCell.cellIndex\n    const isLastColumn = index === table.rows[0].cells.length - 1\n\n    const fillCell = (cell, isFirstRow) => {\n      if (isFirstRow && this.isRowHeaderOn) {\n        this._fillCell(cell)\n        turnTdIntoTh(cell)\n        return\n      }\n\n      this._fillCell(cell)\n    }\n\n    if (isLastColumn) {\n      this.addColumn()\n      return\n    }\n\n    for (let i = 0; i < table.rows.length; i++) {\n      const row = table.rows[i]\n      const cellInColumn = row.cells[index]\n      const isFirstRow = i === 0\n      const isInvisibleCell = cellInColumn.style.display === \"none\"\n      const isMainMergedCell = cellInColumn.colSpan > 1 || cellInColumn.rowSpan > 1\n      const isNormalCell =\n        cellInColumn.colSpan === 1 &&\n        cellInColumn.rowSpan === 1 &&\n        cellInColumn.style.display !== \"none\"\n\n      if (isNormalCell) {\n        const newCell = row.insertCell(index + 1)\n\n        newCell.colSpan = 1\n        newCell.rowSpan = 1\n\n        fillCell(newCell, isFirstRow)\n        continue\n      }\n\n      if (isMainMergedCell) {\n        const newCell = row.insertCell(index + 1)\n\n        cellInColumn.colSpan += 1\n\n        fillCell(newCell, isFirstRow)\n        hideCell(newCell)\n        continue\n      }\n\n      if (isInvisibleCell) {\n        const mainMergedCell = this.searchMainMergedCell(cellInColumn)\n        const isOnSameRowWithMainCell = i === mainMergedCell.parentNode.rowIndex\n        const isOnRightEdgeOfMainCell =\n          index === mainMergedCell.cellIndex + mainMergedCell.colSpan - 1\n\n        if (isOnRightEdgeOfMainCell) {\n          const newCell = row.insertCell(index + 1)\n\n          newCell.colSpan = 1\n          newCell.rowSpan = 1\n\n          fillCell(newCell, isFirstRow)\n          continue\n        }\n\n        if (isOnSameRowWithMainCell) {\n          const newCell = row.insertCell(index + 1)\n\n          mainMergedCell.colSpan += 1\n\n          fillCell(newCell, isFirstRow)\n          hideCell(newCell)\n          continue\n        }\n\n        const newCell = row.insertCell(index + 1)\n\n        fillCell(newCell, isFirstRow)\n        hideCell(newCell)\n        continue\n      }\n    }\n\n    this._numberOfColumns++\n    this.insertCol(index + 1)\n    this.updateButtons()\n  }\n\n  /**\n   *\n   * @param {HTMLTableCellElement} cell\n   */\n  searchMainMergedCell(cell) {\n    const table = this._table\n    const rowIndex = cell.parentNode.rowIndex\n    const colIndex = cell.cellIndex\n    const cells = table.querySelectorAll(\"td,th\")\n    const mainMergedCells = Array.from(cells).filter((cell) => cell.colSpan > 1 || cell.rowSpan > 1)\n\n    return mainMergedCells.find((mainCell) => {\n      const mainCellRowIndex = mainCell.parentNode.rowIndex\n      const mainCellColindex = mainCell.cellIndex\n      const mainCellMaxRowIndex = mainCellRowIndex + (mainCell.rowSpan - 1)\n      const mainCellMaxColIndex = mainCellColindex + (mainCell.colSpan - 1)\n\n      return (\n        mainCellRowIndex <= rowIndex &&\n        rowIndex <= mainCellMaxRowIndex &&\n        mainCellColindex <= colIndex &&\n        colIndex <= mainCellMaxColIndex\n      )\n    })\n  }\n\n  removeColumn(index) {\n    const table = this._table\n    const isFirstColumn = index === 0\n\n    if (isFirstColumn) {\n      this.isColHeaderOn = false\n    }\n\n    for (let i = 0; i < table.rows.length; i++) {\n      const row = table.rows[i]\n      const cellInColumn = row.cells[index]\n\n      // 현재 셀이 합쳐진 셀의 본체라면, 셀의 colspan, rowspan 만큼의 범위를 순회하며 거치는 모든 셀을 해방합니다.\n      // 그리고 인덱스에 해당하는 셀을 삭제합니다.\n      if (cellInColumn.colSpan > 1) {\n        const colspan = cellInColumn.colSpan\n        const rowspan = cellInColumn.rowSpan\n\n        for (let j = i; j < i + rowspan; j++) {\n          for (let k = index; k < index + colspan; k++) {\n            const cell = table.rows[j].cells[k]\n\n            showHiddenCell(cell)\n          }\n\n          table.rows[j].deleteCell(index)\n        }\n\n        i += rowspan - 1\n        continue\n      }\n\n      // 현재 셀이 합쳐진 셀의 일부라면 왼쪽으로 탐색하며 합쳐진 셀의 본체를 찾습니다.\n      // 본체를 찾았다면 본체의 colSpan 을 1 깎고 반복문을 종료합니다.\n      if (cellInColumn.style.display === \"none\") {\n        for (let j = index - 1; j >= 0; j--) {\n          const leftCell = row.cells[j]\n\n          if (leftCell.colSpan > 1) {\n            leftCell.colSpan -= 1\n            break\n          }\n\n          if (leftCell.style.display !== \"none\") {\n            break\n          }\n        }\n      }\n\n      this._table.rows[i].deleteCell(index)\n    }\n\n    this._numberOfColumns--\n    this._removeInvisibleRows()\n\n    if (!this.readOnly) {\n      this.removeCol(index)\n      this.updateButtons()\n    }\n  }\n\n  /**\n   * Add row in table on index place\n   *\n   * @param {number} index - number in the array of columns, where new column to insert,-1 if insert at the end\n   * @returns {HTMLElement} row\n   */\n  addRow(index = -1) {\n    this._numberOfRows++\n    const row = this._table.insertRow(index)\n\n    if (index === 0) {\n      this.removeButtons(0)\n    }\n\n    this._fillRow(row, index)\n    this.updateButtons()\n    return row\n  }\n\n  addRowBelow() {\n    const table = this._table\n    const isSelectedCellMerged = this.selectedCell.colSpan > 1 || this.selectedCell.rowSpan > 1\n    const edgeIndex = this.selectedCell.rowSpan + this.selectedCell.parentNode.rowIndex - 1\n    const index = isSelectedCellMerged ? edgeIndex : this.selectedCell.parentNode.rowIndex\n    const isLastRow = index === table.rows.length - 1\n\n    const fillCell = (cell, isFirstColumn) => {\n      if (isFirstColumn && this.isColHeaderOn) {\n        this._fillCell(cell)\n        turnTdIntoTh(cell)\n        return\n      }\n\n      this._fillCell(cell)\n    }\n\n    if (isLastRow) {\n      this.addRow()\n      return\n    }\n\n    const newRow = table.insertRow(index + 1)\n\n    for (let i = 0; i < table.rows[index].cells.length; i++) {\n      const cell = table.rows[index].cells[i]\n      const isInvisibleCell = cell.style.display === \"none\"\n      const isMainMergedCell = cell.colSpan > 1 || cell.rowSpan > 1\n      const isNormalCell = cell.colSpan === 1 && cell.rowSpan === 1 && cell.style.display !== \"none\"\n      const isFirstColumn = i === 0\n\n      if (isNormalCell) {\n        const newCell = newRow.insertCell(i)\n\n        newCell.colSpan = 1\n        newCell.rowSpan = 1\n\n        fillCell(newCell, isFirstColumn)\n        continue\n      }\n\n      if (isMainMergedCell) {\n        const newCell = newRow.insertCell(i)\n\n        cell.rowSpan += 1\n\n        fillCell(newCell, isFirstColumn)\n        hideCell(newCell)\n        continue\n      }\n\n      if (isInvisibleCell) {\n        const mainMergedCell = this.searchMainMergedCell(cell)\n        const isOnSameColumnWithMainCell = i === mainMergedCell.cellIndex\n        const isAtBottomOfMaincell =\n          index === mainMergedCell.parentNode.rowIndex + mainMergedCell.rowSpan - 1\n\n        if (isAtBottomOfMaincell) {\n          const newCell = newRow.insertCell(i)\n\n          newCell.colSpan = 1\n          newCell.rowSpan = 1\n\n          fillCell(newCell, isFirstColumn)\n          continue\n        }\n\n        if (isOnSameColumnWithMainCell) {\n          const newCell = newRow.insertCell(i)\n\n          mainMergedCell.rowSpan += 1\n\n          fillCell(newCell, isFirstColumn)\n          hideCell(newCell)\n          continue\n        }\n\n        const newCell = newRow.insertCell(i)\n\n        fillCell(newCell, isFirstColumn)\n        hideCell(newCell)\n        continue\n      }\n    }\n\n    this._numberOfRows++\n    this.updateButtons()\n  }\n\n  removeRow(index) {\n    const table = this._table\n    const selectedRow = table.rows[index]\n    const isFirstRow = index === 0\n\n    if (isFirstRow) {\n      this.isRowHeaderOn = false\n    }\n\n    for (let i = 0; i < selectedRow.cells.length; i++) {\n      const cell = selectedRow.cells[i]\n\n      // 현재 셀이 합쳐진 셀의 본체라면, 아래로 탐색하며 소속된 셀을 전부 해방합니다.\n      // 같은 줄에 소속된 셀이 있다면 삭제될 것이니 건너뜁니다.\n      if (cell.rowSpan > 1) {\n        for (let j = index + 1; j < table.rows.length; j++) {\n          for (let k = i; k < i + cell.colSpan; k++) {\n            const cellBelow = table.rows[j].cells[k]\n\n            showHiddenCell(cellBelow)\n          }\n        }\n      }\n\n      if (cell.colSpan > 1) {\n        i += cell.colSpan\n      }\n\n      // 현재 셀이 합쳐진 셀의 일부라면 위로 탐색하며 합쳐진 셀의 본체를 찾습니다.\n      // 본체를 찾았다면 본체의 rowSpan 을 1 깎고 반복문을 종료합니다.\n      if (cell.style.display === \"none\") {\n        for (let j = index - 1; j >= 0; j--) {\n          const upperRow = table.rows[j]\n          const cellInUpperRow = upperRow.cells[i]\n\n          if (cellInUpperRow.rowSpan > 1) {\n            cellInUpperRow.rowSpan -= 1\n            break\n          }\n\n          if (cellInUpperRow.style.display !== \"none\") {\n            break\n          }\n        }\n      }\n    }\n\n    this._numberOfRows--\n    table.rows[index].remove()\n    this.updateButtons()\n  }\n\n  mergeCells() {\n    const table = this._table\n    const everyCell = table.querySelectorAll(\"td,th\")\n    const selectedCells = Array.from(everyCell).filter((cell) =>\n      cell.classList.contains(\"selected\")\n    )\n\n    const topLeftCell = selectedCells[0]\n    const bottomRightCell = selectedCells[selectedCells.length - 1]\n\n    const colSpan = bottomRightCell.cellIndex - topLeftCell.cellIndex + 1\n    const rowSpan = bottomRightCell.parentNode.rowIndex - topLeftCell.parentNode.rowIndex + 1\n\n    selectedCells.forEach((cell, i) => {\n      // 첫 번째 셀의 colspan, rowspan 을 늘리고 나머지 셀을 숨긴다.\n      if (i === 0) {\n        cell.colSpan = colSpan\n        cell.rowSpan = rowSpan\n      } else {\n        hideCell(cell)\n      }\n    })\n\n    this._removeInvisibleRows()\n    // remove invisible columns?\n  }\n\n  checkIfMergePossible() {\n    if (!this.selectedCols.length && !this.selectedRows.length) {\n      return false\n    }\n\n    const table = this._table\n\n    let everySelectedCells = 0\n    let visibleSelectedCells = 0\n\n    for (let i = 0; i < table.rows.length; i++) {\n      const row = table.rows[i]\n\n      for (let j = 0; j < row.cells.length; j++) {\n        const cell = row.cells[j]\n\n        if (cell.classList.contains(\"selected\")) {\n          everySelectedCells += 1\n\n          if (cell.style.display !== \"none\") {\n            visibleSelectedCells += cell.colSpan * cell.rowSpan\n          }\n        }\n      }\n    }\n\n    return everySelectedCells === visibleSelectedCells\n  }\n\n  unmerge() {\n    const table = this._table\n    const selectedCell = this.selectedCell\n    const rowIndex = selectedCell.parentNode.rowIndex\n    const cellIndex = selectedCell.cellIndex\n    const rowSpan = selectedCell.rowSpan\n    const colSpan = selectedCell.colSpan\n\n    for (let i = rowIndex; i < rowIndex + rowSpan; i++) {\n      for (let j = cellIndex; j < cellIndex + colSpan; j++) {\n        const cell = table.rows[i].cells[j]\n\n        if (i === rowIndex && j === cellIndex) {\n          cell.colSpan = 1\n          cell.rowSpan = 1\n          continue\n        }\n\n        showHiddenCell(cell)\n      }\n    }\n  }\n\n  toggleFirstRowHeader() {\n    const table = this._table\n    const firstRow = table.rows[0]\n\n    for (let i = 0; i < firstRow.cells.length; i++) {\n      if (this.isRowHeaderOn) {\n        turnThIntoTd(firstRow.cells[i])\n      } else {\n        turnTdIntoTh(firstRow.cells[i])\n      }\n    }\n\n    if (this.isRowHeaderOn) {\n      this.isRowHeaderOn = false\n    } else {\n      this.isRowHeaderOn = true\n    }\n  }\n\n  toggleFirstColHeader() {\n    const table = this._table\n\n    for (let i = 0; i < table.rows.length; i++) {\n      const cell = table.rows[i].cells[0]\n\n      if (this.isColHeaderOn) {\n        turnThIntoTd(cell)\n      } else {\n        turnTdIntoTh(cell)\n      }\n    }\n\n    if (this.isColHeaderOn) {\n      this.isColHeaderOn = false\n    } else {\n      this.isColHeaderOn = true\n    }\n  }\n\n  /**\n   * get html element of table\n   *\n   * @returns {HTMLElement}\n   */\n  get htmlElement() {\n    return this._element\n  }\n\n  /**\n   * get real table tag\n   *\n   * @returns {HTMLElement}\n   */\n  get body() {\n    return this._table\n  }\n\n  /**\n   * returns selected/editable cell\n   *\n   * @returns {HTMLElement}\n   */\n  get selectedCell() {\n    return this._selectedCell\n  }\n\n  get withBorder() {\n    return\n  }\n\n  /**\n   * 가로줄에 있는 모든 셀이 display=\"none\" 이 되는 경우에 해당 Row 를 삭제한다.\n   *\n   * @returns 위 조건에 해당하는 Row 의 갯수를 반환한다.\n   */\n  _removeInvisibleRows() {\n    const table = this._table\n    const invisibleRows = []\n\n    for (let i = 0; i < table.rows.length; i++) {\n      const row = table.rows[i]\n      const isEveryCellInvisible = Array.from(row.cells).every(\n        (cell) => cell.style.display === \"none\"\n      )\n\n      if (isEveryCellInvisible) {\n        invisibleRows.push(i)\n      }\n    }\n\n    invisibleRows.forEach((index, i) => {\n      this.removeRow(index - i)\n    })\n\n    // 테이블의 row 가 하나로 줄어든다면 모든 셀의 rowSpan 을 1 로 보정합니다.\n    if (table.rows.length === 1) {\n      for (let i = 0; i < table.rows[0].cells.length; i++) {\n        const cell = table.rows[0].cells[i]\n\n        cell.rowSpan = 1\n      }\n    }\n\n    return invisibleRows.length\n  }\n\n  /**\n   * @private\n   * @returns {HTMLElement} tbody - where rows will be\n   */\n  _createTableWrapper() {\n    const className = this.readOnly ? CSS.containerReadOnly : CSS.container\n    const wrapper = create(\"div\", [className], null, [\n      create(\"div\", [CSS.wrapper], null, [\n        create(\"table\", [CSS.table], null, [create(\"colgroup\"), create(\"tbody\")]),\n      ]),\n    ])\n\n    if (!this.readOnly) {\n      // const addRowButton = create(\"div\", [CSS.addRowButton])\n      // const addColumnButton = create(\"div\", [CSS.addColumnButton])\n      // addRowButton.addEventListener(\"click\", () => this.addColumn(this._numberOfColumns), true)\n      // addColumnButton.addEventListener(\"click\", () => this.addRow(this._numberOfRows), true)\n      // wrapper.appendChild(addRowButton)\n      // wrapper.appendChild(addColumnButton)\n    }\n\n    return wrapper\n  }\n\n  /**\n   * @private\n   * @returns {HTMLElement} - the area\n   */\n  _createContentEditableArea() {\n    return create(\"div\", [CSS.inputField], { contentEditable: !this.readOnly })\n  }\n\n  /**\n   * @private\n   * @param {HTMLElement} cell - empty cell\n   */\n  _fillCell(cell) {\n    const content = this._createContentEditableArea()\n\n    this.cellMenu.createElem(cell)\n    cell.classList.add(CSS.cell)\n    cell.appendChild(create(\"div\", [CSS.area], null, [content]))\n  }\n\n  /**\n   * @private\n   * @param row = the empty row\n   */\n  _fillRow(row) {\n    for (let i = 0; i < this._numberOfColumns; i++) {\n      const cell = row.insertCell()\n\n      this._fillCell(cell)\n    }\n  }\n\n  /**\n   * @private\n   */\n  _hangEvents() {\n    this._table.addEventListener(\"focus\", this._focusEditField.bind(this), true)\n\n    this._table.addEventListener(\"blur\", this._blurEditField.bind(this), true)\n\n    this._table.addEventListener(\"keydown\", this._shortcutKeys.bind(this))\n\n    this._table.addEventListener(\"mousedown\", this._mouseDownOnCell.bind(this))\n\n    this._table.addEventListener(\"mouseover\", this._mouseEnterInDetectArea.bind(this), true)\n  }\n\n  /**\n   * @private\n   * @param {FocusEvent} event\n   */\n  _focusEditField(event) {\n    if (!event.target.classList.contains(CSS.inputField)) {\n      return\n    }\n\n    this._selectedCell = event.target.closest(\".\" + CSS.cell)\n\n    const optionButton = this.selectedCell.querySelector(\".\" + CellMenuCSS.openCellMenuButton)\n\n    optionButton.style.visibility = \"visible\"\n    // this.imageUpload.onToggle(true);\n  }\n\n  /**\n   * @private\n   * @param {FocusEvent} event\n   */\n  _blurEditField(event) {\n    if (!event.target.classList.contains(CSS.inputField)) {\n      return\n    }\n\n    const lastSelectedCell = event.target.closest(\".\" + CSS.cell)\n    const optionButton = lastSelectedCell.querySelector(\".\" + CellMenuCSS.openCellMenuButton)\n\n    optionButton.style.visibility = \"hidden\"\n\n    // this.imageUpload.onToggle(false);\n  }\n\n  /**\n   * @private\n   * @param {KeyboardEvent} event\n   */\n  _shortcutKeys(event) {\n    if (!event.target.classList.contains(CSS.inputField)) {\n      return\n    }\n    if (event.key === \"Enter\") {\n      this.shortcuts.handleEnterKeyPress(event)\n      return\n    }\n    if (event.key === \"Tab\") {\n      this.shortcuts.handleTabKeyPress(event)\n      return\n    }\n    if (event.key === \"ArrowUp\") {\n      this.shortcuts.handleArrowUpKeyPress(event)\n      return\n    }\n    if (event.key === \"ArrowDown\") {\n      this.shortcuts.handleArrowDownKeyPress(event)\n      return\n    }\n  }\n\n  /**\n   * @private\n   * @param {MouseEvent} event\n   */\n  _mouseDownOnCell(event) {\n    if (event.button !== 0) return\n    if (event.target.closest(\".\" + CellMenuCSS.openCellMenuButton)) return\n    if (!event.target.closest(\"td,th\")) return\n\n    const table = this._table\n    const cell = event.target.closest(\"td,th\")\n    const startRowIndex = cell.parentNode.rowIndex\n    const startColIndex = cell.cellIndex\n    let currentCell = cell\n    this.selectedRows = []\n    this.selectedCols = []\n\n    const handleMouseMove = (event) => {\n      if (!event.target.closest(\"td,th\")) return\n\n      const elementBelowMousePointer = document.elementFromPoint(event.clientX, event.clientY)\n      const cellBelowMousePointer = elementBelowMousePointer.closest(\"td,th\")\n      const currentRowIndex = cellBelowMousePointer.parentNode.rowIndex\n      const currentColIndex = cellBelowMousePointer.cellIndex\n\n      if (currentCell !== cellBelowMousePointer) {\n        this.deselectCells()\n        selectCells(currentRowIndex, currentColIndex)\n        cellBelowMousePointer.querySelector(\".\" + CSS.inputField).focus()\n\n        currentCell = cellBelowMousePointer\n      }\n    }\n\n    const handleMouseUp = (event) => {\n      document.removeEventListener(\"mousemove\", handleMouseMove)\n      document.removeEventListener(\"mouseup\", handleMouseUp)\n    }\n\n    const selectCells = (currentRowIndex, currentColIndex) => {\n      const currentCell = table.rows[currentRowIndex].cells[currentColIndex]\n      const isLastCellMerged = currentCell.colSpan > 1 || currentCell.rowSpan > 1\n      let additionalRow = 0\n      let additionalCol = 0\n      this.selectedRows = []\n      this.selectedCols = []\n\n      if (isLastCellMerged) {\n        additionalRow += currentCell.rowSpan - 1\n        additionalCol += currentCell.colSpan - 1\n      }\n\n      for (let i = startRowIndex; i <= currentRowIndex + additionalRow; i++) {\n        const cellsInRow = table.rows[i].cells\n\n        for (let j = startColIndex; j <= currentColIndex + additionalCol; j++) {\n          const cell = cellsInRow[j]\n\n          cell.classList.add(\"selected\")\n        }\n\n        this.selectedRows.push(i)\n      }\n\n      for (let i = startColIndex; i <= currentColIndex + additionalCol; i++) {\n        this.selectedCols.push(i)\n      }\n    }\n\n    this.deselectCells()\n    this.cellMenu.hideCellMenu()\n\n    document.addEventListener(\"mousemove\", handleMouseMove)\n    document.addEventListener(\"mouseup\", handleMouseUp)\n  }\n\n  /**\n   * @private\n   * @param {MouseEvent} event\n   */\n  _mouseEnterInDetectArea(event) {\n    if (!event.target.classList.contains(CSS.area)) {\n      return\n    }\n\n    const coordsCell = getCoords(event.target.closest(\"TD,TH\"))\n    const side = getSideByCoords(coordsCell, event.pageX, event.pageY)\n\n    event.stopPropagation()\n    event.target.dispatchEvent(\n      new CustomEvent(\"mouseInActivatingArea\", {\n        detail: {\n          side: side,\n        },\n        bubbles: true,\n      })\n    )\n  }\n}\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target, parent) {\n  if (parent){\n    return parent.querySelector(target);\n  }\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target, parent) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target, parent);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertAt.before, target);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\n\tif(options.attrs.nonce === undefined) {\n\t\tvar nonce = getNonce();\n\t\tif (nonce) {\n\t\t\toptions.attrs.nonce = nonce;\n\t\t}\n\t}\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction getNonce() {\n\tif (typeof __webpack_nonce__ === 'undefined') {\n\t\treturn null;\n\t}\n\n\treturn __webpack_nonce__;\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = typeof options.transform === 'function'\n\t\t ? options.transform(obj.css) \n\t\t : options.transform.default(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","import { create } from \"./documentUtils\"\nconst imageUploadIcon = require(\"./img/image-upload.svg\")\nconst imageDeleteIcon = require(\"./img/image-delete.svg\")\nimport \"./styles/image-upload.scss\"\n\nconst IMAGE_UPLOAD_URL = \"/upload_image\"\n\nexport const CSS = {\n  imageUploadButton: \"tc-table__image_upload_button\",\n  imageUploadButtonVisible: \"tc-table__image_upload_button_visible\",\n  image: \"tc-table__image\",\n  wrapper: \"tc-table__wrapper_image\",\n  buttonDelete: \"tc-table__wrapper_image_button\",\n}\n\nexport class ImageUpload {\n  constructor(table) {\n    this.buttonText = \"Добавить изображение\"\n    this.table = table\n    this.visible = false\n    this.cell = null\n    this.Button = null\n  }\n\n  /**\n   * @private\n   * @returns {HTMLElement} - the create col/row\n   */\n  createElem = (wrapper) => {\n    if (!wrapper.querySelector(`.${CSS.imageUploadButton}`)) {\n      const fileInput = create(\"input\", [], { type: \"file\" })\n      const button = create(\"span\")\n      button.innerHTML = imageUploadIcon\n\n      this.Button = create(\"label\", [CSS.imageUploadButton], { title: this.buttonText }, [\n        fileInput,\n        button,\n      ])\n      fileInput.addEventListener(\"change\", this.onChange)\n\n      wrapper.appendChild(this.Button)\n      return this.Button\n    }\n  }\n\n  onToggle = (visible) => {\n    this.visible = visible\n    if (visible) {\n      this.Button.classList.add(CSS.imageUploadButtonVisible)\n      if (visible && this.table._selectedCell) {\n        this.cell = this.table._selectedCell\n        this.Button.style.top = `${this.cell.offsetTop + this.cell.offsetHeight}px`\n        this.Button.style.left = `${this.cell.offsetLeft}px`\n      }\n    } else {\n      setTimeout(() => {\n        if (!this.table._selectedCell) {\n          this.Button.classList.remove(CSS.imageUploadButtonVisible)\n        }\n      }, 200)\n    }\n  }\n\n  createImage = (cell, src) => {\n    const [elem] = cell.children[0].children\n    const image = create(\"img\", [CSS.image], { src })\n    if (this.table.readOnly) {\n      elem.replaceWith(image)\n    } else {\n      const X = create(\"div\")\n      X.innerHTML = imageDeleteIcon\n      const button = create(\"div\", [CSS.buttonDelete], null, [X])\n      const wrapper = create(\"div\", [CSS.wrapper], null, [image, button])\n\n      button.addEventListener(\"click\", this.removeImage)\n      elem.replaceWith(wrapper)\n    }\n  }\n\n  removeImage = (event) => {\n    const wrapper = event.target.closest(`.${CSS.wrapper}`)\n    wrapper.replaceWith(this.table._createContentEditableArea())\n  }\n\n  onChange = async (e) => {\n    this.image = e.target.files[0]\n    const { url } = await this.onUploadImage()\n    if (url) {\n      this.createImage(this.cell, url)\n    }\n  }\n\n  onUploadImage = async () => {\n    const fd = new FormData()\n    fd.append(\"upfile\", this.image)\n\n    const r = await fetch(IMAGE_UPLOAD_URL, {\n      method: \"POST\",\n      body: fd,\n    }).then((r) => r.json())\n\n    return r\n  }\n}\n","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" height=\\\"20\\\" width=\\\"20\\\"><path d=\\\"M10 12.458q-.167 0-.323-.062-.156-.063-.302-.208L5.604 8.417q-.25-.25-.229-.625.021-.375.25-.604.271-.271.625-.261.354.011.604.261L10 10.354l3.167-3.166q.25-.25.593-.25.344 0 .615.27.25.25.25.615t-.25.615l-3.75 3.75q-.146.145-.302.208-.156.062-.323.062Z\\\"></path></svg>\"","const TableConstructor = require(\"./tableConstructor\").TableConstructor\nconst svgIcon = require(\"./img/toolboxIcon.svg\")\nconst borderIcon = require(\"./img/border.svg\")\nconst { CSS: imageCSS } = require(\"./imageUpload\")\n\n/**\n *  Tool for table's creating\n *\n *  @typedef {object} TableData - object with the data transferred to form a table\n *  @property {string[][]} content - two-dimensional array which contains table content\n */\nclass Table {\n  /**\n   * Notify core that read-only mode is supported\n   *\n   * @returns {boolean}\n   */\n  static get isReadOnlySupported() {\n    return true\n  }\n\n  /**\n   * Allow to press Enter inside the CodeTool textarea\n   *\n   * @returns {boolean}\n   * @public\n   */\n  static get enableLineBreaks() {\n    return true\n  }\n\n  /**\n   * Sanitizer rules\n   */\n  static get sanitize() {\n    return {\n      br: true,\n      mark: true,\n    }\n  }\n\n  /**\n   * Get Tool toolbox settings\n   * icon - Tool icon's SVG\n   * title - title to show in toolbox\n   *\n   * @returns {{icon: string, title: string}}\n   */\n  static get toolbox() {\n    return {\n      icon: svgIcon,\n      title: \"Table\",\n    }\n  }\n\n  /**\n   * Render plugin`s main Element and fill it with saved data\n   *\n   * @param {TableData} data — previously saved data\n   * @param {object} config - user config for Tool\n   * @param {object} api - Editor.js API\n   * @param {boolean} readOnly - read-only mode flag\n   */\n  constructor({ data, config, api, readOnly }) {\n    this.api = api\n    this.readOnly = readOnly\n\n    this._tableConstructor = new TableConstructor(data, config, api, readOnly)\n\n    this._CSS = {\n      input: \"tc-table__inp\",\n      settingsButton: this.api.styles.settingsButton,\n      settingsButtonActive: this.api.styles.settingsButtonActive,\n    }\n\n    this.borderActive = data.settings?.withBorder\n  }\n\n  /**\n   * Return Tool's view\n   *\n   * @returns {HTMLDivElement}\n   * @public\n   */\n  render() {\n    return this._tableConstructor.htmlElement\n  }\n\n  /**\n   * Extract Tool's data from the view\n   *\n   * @param {HTMLElement} toolsContent - Tool HTML element\n   *\n   * @returns {TableData} - saved data\n   */\n  save(toolsContent) {\n    const table = toolsContent.querySelector(\"table\")\n    const colgroup = []\n    const rows = []\n\n    for (let i = 0; i < table.rows.length; i++) {\n      const row = table.rows[i]\n      const rowData = []\n\n      for (let j = 0; j < row.cells.length; j++) {\n        const cell = row.cells[j]\n        const data = {\n          text: cell.querySelector(\".\" + this._CSS.input).innerHTML,\n          colspan: cell.colSpan,\n          rowspan: cell.rowSpan,\n          display: cell.style.display === \"none\" ? false : true,\n          bgColor: cell.style.backgroundColor,\n          isHeader: cell.tagName === \"TH\",\n        }\n\n        rowData.push(data)\n      }\n\n      rows.push(rowData)\n    }\n\n    table.querySelectorAll(\"col\").forEach((col) => {\n      colgroup.push({\n        span: col.span,\n        width: col.style.width,\n      })\n    })\n\n    return {\n      rows,\n      colgroup,\n    }\n  }\n\n  /**\n   * @private\n   * @param {HTMLElement} input - input field\n   * @returns {boolean}\n   */\n  _isEmpty(input) {\n    return !input.textContent.trim()\n  }\n\n  toggleBorder = () => {\n    this.borderActive = !this.borderActive\n    this.toggleBorderButton.classList.toggle(this._CSS.settingsButtonActive, this.borderActive)\n    this._tableConstructor._table._element.classList.toggle(\n      this._tableConstructor._CSS.withBorder,\n      this.borderActive\n    )\n  }\n\n  /**\n   * Create Block's settings block\n   *\n   * @returns {HTMLElement}\n   */\n  renderSettings() {\n    const holder = document.createElement(\"DIV\")\n\n    /** Add border toggle */\n    const toggleBorderButton = document.createElement(\"SPAN\")\n\n    toggleBorderButton.classList.add(this._CSS.settingsButton)\n\n    /**\n     * Highlight current level button\n     */\n    if (this.borderActive) {\n      toggleBorderButton.classList.add(this._CSS.settingsButtonActive)\n    }\n\n    /**\n     * Add SVG icon\n     */\n    toggleBorderButton.innerHTML = borderIcon\n\n    /**\n     * Save level to its button\n     */\n    toggleBorderButton.dataset.active = this.borderActive\n\n    /**\n     * Set up click handler\n     */\n    toggleBorderButton.addEventListener(\"click\", () => {\n      this.toggleBorder()\n    })\n\n    /**\n     * Append settings button to holder\n     */\n    // holder.appendChild(toggleBorderButton);\n\n    /**\n     * Save settings buttons\n     */\n    this.toggleBorderButton = toggleBorderButton\n\n    return holder\n  }\n}\n\nmodule.exports = Table\n","import \"./styles/table-constructor.scss\"\nimport { create } from \"./documentUtils\"\nimport { Table } from \"./table\"\n\n/**\n * Entry point. Controls table and give API to user\n */\nexport class TableConstructor {\n  /**\n   * Creates\n   * @param {TableData} data - previously saved data for insert in table\n   * @param {object} config - configuration of table\n   * @param {object} api - Editor.js API\n   * @param {boolean} readOnly - read-only mode flag\n   */\n  constructor(data, config, api, readOnly) {\n    this.readOnly = readOnly\n\n    this._CSS = {\n      editor: \"tc-editor\",\n      inputField: \"tc-table__inp\",\n      withBorder: \"tc-table__with_border\",\n    }\n\n    /** creating table */\n\n    try {\n      this._table = new Table(config, api, readOnly)\n      this._drawTable(data, config)\n    } catch (e) {\n      console.log(e)\n    }\n\n    /** creating container around table */\n    this._container = create(\"div\", [this._CSS.editor, api.styles.block], null, [\n      this._table.htmlElement,\n    ])\n\n    /** Создаем кнопку для загрузки изображения */\n    this._table.imageUpload.createElem(this._container)\n\n    /** Activated elements */\n    this._hoveredCell = null\n    this._hoveredCellSide = null\n  }\n\n  /**\n   * returns html element of TableConstructor;\n   * @return {HTMLElement}\n   */\n  get htmlElement() {\n    return this._container\n  }\n\n  /**\n   * @private\n   *\n   * resize to match config or transmitted data\n   * @param {TableData} data - data for inserting to the table\n   * @param {object} config - configuration of table\n   * @param {number|string} config.rows - number of rows in configuration\n   * @param {number|string} config.cols - number of cols in configuration\n   * @return {{rows: number, cols: number}} - number of cols and rows\n   */\n  _drawTable(data, config) {\n    const isDataValid = !!data && Array.isArray(data.rows) && Array.isArray(data.colgroup)\n    const contentRows = isDataValid ? data.rows.length : undefined\n    const contentCols = isDataValid ? data.colgroup.length : undefined\n    const configRows = Number.parseInt(config.rows)\n    const configCols = Number.parseInt(config.cols)\n    const defaultRows = 3\n    const defaultCols = 2\n    const rows = contentRows || configRows || defaultRows\n    const cols = contentCols || configCols || defaultCols\n    const table = this._table\n\n    if (!isDataValid) {\n      for (let i = 0; i < rows; i++) {\n        table.addRow(i)\n      }\n      for (let i = 0; i < cols; i++) {\n        table.addColumn(i)\n      }\n\n      table.htmlElement.classList.toggle(this._CSS.withBorder, true)\n    } else {\n      table.htmlElement.classList.toggle(this._CSS.withBorder, true)\n      this._table.drawTableFromData(data)\n    }\n\n    return {\n      rows: rows,\n      cols: cols,\n    }\n  }\n}\n","\nvar content = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/dist/cjs.js!./table-constructor.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/dist/cjs.js!./table-constructor.scss\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/dist/cjs.js!./table-constructor.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".tc-editor{padding:10px;position:relative;box-sizing:content-box;width:100%;left:-10px}.tc-editor__readonly{margin-bottom:0}.tc-editor .table-toolbar{position:absolute;bottom:-60px;left:30px;display:flex;flex-direction:row;align-items:center;background-color:#fff;box-shadow:0px 0px 10px #e6e6e6;border-radius:4px;width:87%;height:40px;padding:8px 16px;color:#000}.tc-editor .table-toolbar__button{border:none;background:none;border-radius:4px;font-size:12px;color:#797979;width:40px;height:40px;background-color:#fff;transition:80ms cubic-bezier(0.33, 1, 0.68, 1);transition-property:color,background-color,box-shadow,border-color;cursor:pointer}.tc-editor .table-toolbar__button:hover{background-color:#f3f3f3;transition-duration:.1s}.tc-editor .table-toolbar__button:not(:last-child){margin-right:10px}\", \"\"]);\n\n// exports\n","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n","module.exports = \"<svg viewBox=\\\"0 0 24 24\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M19 5V19H5V5H19ZM19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM14.14 11.86L11.14 15.73L9 13.14L6 17H18L14.14 11.86Z\\\"></path></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 24 24\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M19 5V16.17L21 18.17V5C21 3.9 20.1 3 19 3H5.83L7.83 5H19ZM2.81 2.81L1.39 4.22L3 5.83V19C3 20.1 3.9 21 5 21H18.17L19.78 22.61L21.19 21.2L2.81 2.81ZM5 19V7.83L12.07 14.9L11.25 16L9 13L6 17H14.17L16.17 19H5Z\\\"></path></svg>\"","\nvar content = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/dist/cjs.js!./image-upload.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/dist/cjs.js!./image-upload.scss\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/dist/cjs.js!./image-upload.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".tc-table__wrapper_image{position:relative}.tc-table__wrapper_image:hover>div{display:block}.tc-table__wrapper_image_button{position:absolute;padding:20px;overflow:hidden;max-width:100%;border-radius:8px;transform:translate(-50%, -50%);top:50%;left:50%;cursor:pointer;display:none;background-color:red;box-shadow:0 0 10px rgba(0,0,0,.3)}.tc-table__wrapper_image_button:hover{box-shadow:0 0 20px rgba(0,0,0,.5)}.tc-table__wrapper_image_button:before{content:\\\"\\\";display:block;padding-bottom:100%}.tc-table__wrapper_image_button div{display:flex;align-content:center;justify-content:center;position:absolute;padding:5px;top:0;left:0;right:0;bottom:0}.tc-table__wrapper_image_button div svg{color:#fff;width:32px;height:32px}.tc-table__image_upload_button{position:absolute;margin-left:33px;margin-top:33px;display:none;z-index:2;width:40px;height:40px}.tc-table__image_upload_button span{width:40px;height:40px;cursor:pointer;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:bold;border:none;border-radius:8px;background-color:#fff;box-shadow:2px 2px 6px rgba(0,0,0,.2);transition:box-shadow .2s ease}.tc-table__image_upload_button span:hover{box-shadow:2px 2px 10px rgba(0,0,0,.5);background-color:#368be6}.tc-table__image_upload_button span:hover svg{color:#fff}.tc-table__image_upload_button span:hover{box-shadow:2px 2px 6px rgba(0,0,0,.2)}.tc-table__image_upload_button span svg{color:#368be6;width:32px;height:32px}.tc-table__image_upload_button input{pointer-events:none;user-select:none;opacity:0;outline:0;position:absolute}.tc-table__image_upload_button_visible{display:block}\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/dist/cjs.js!./table.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/dist/cjs.js!./table.scss\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/dist/cjs.js!./table.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".ce-toolbar{z-index:11}.tc-table{width:100%;height:100%;border-collapse:collapse;table-layout:fixed}.tc-table col{min-width:50px}.tc-table tbody th{background-color:#f9f9f9;text-align:initial;font-weight:bold}.tc-table__container{padding:40px 16px 16px 40px;margin:-24px 0 0 -24px;position:relative;overflow:auto}.tc-table__container_readonly{overflow:auto;padding:16px 0;margin:0}.tc-table__image{max-width:100%}.tc-table__with_border .tc-table__cell{border-color:#dbdbe2}.tc-table__wrap{position:relative;height:100%;width:100%;box-sizing:border-box}.tc-table__tr_remove,.tc-table__td_remove{background-color:rgba(214,44,11,.2);transition:background-color .2s ease}.tc-table__cell{border:1px solid rgba(0,0,0,0);padding:0;vertical-align:top;position:relative}.tc-table__add_row_button,.tc-table__add_column_button{background-color:#ececec;height:13px;bottom:0;width:calc(100% - 56px);position:absolute;z-index:1;border:1px solid #000;cursor:pointer;display:flex;align-items:center;justify-content:center;font-weight:bold;transition:opacity .2s ease;box-sizing:border-box}.tc-table__add_row_button:after,.tc-table__add_column_button:after{content:\\\"+\\\";color:#4a525f}.tc-table__add_row_button:hover,.tc-table__add_column_button:hover{background-color:#4a525f}.tc-table__add_row_button:hover:after,.tc-table__add_column_button:hover:after{color:#fff}.tc-table__add_row_button{height:calc(100% - 56px);width:12px;right:0;top:40px}.tc-table__add_row,.tc-table__add_column{flex-direction:column;left:-10px;top:-38px;position:absolute;align-items:center;display:flex;height:4000px;width:20px;pointer-events:none}.tc-table__add_row>div:first-child,.tc-table__add_column>div:first-child{width:20px;height:20px;align-items:center;justify-content:center;display:flex;pointer-events:all}.tc-table__add_row>div:first-child:before,.tc-table__add_column>div:first-child:before{content:\\\"\\\";display:block;width:4px;height:4px;border-radius:50%;background-color:#c1c7d0}.tc-table__add_row>div:first-child:after,.tc-table__add_column>div:first-child:after{content:\\\"+\\\";width:20px;height:20px;background-color:#72b6ec;border-radius:50%;color:#fff;text-align:center;cursor:pointer;display:none;align-items:center;justify-content:center;font-weight:bold;padding-bottom:1px}.tc-table__add_row>div:first-child:hover:before,.tc-table__add_column>div:first-child:hover:before{display:none}.tc-table__add_row>div:first-child:hover:after,.tc-table__add_column>div:first-child:hover:after{display:flex}.tc-table__add_row>div:first-child:hover~div,.tc-table__add_column>div:first-child:hover~div{opacity:1}.tc-table__add_row>div:last-child,.tc-table__add_column>div:last-child{width:3px;height:100%;background-color:#72b6ec;margin-top:18px;opacity:0}.tc-table__add_row{flex-direction:row;left:-37px;top:-11px;justify-content:center;height:20px;width:4000px}.tc-table__add_row>div:last-child{width:100%;height:3px;margin-left:17px;margin-top:0}.tc-table__add_column_end{left:auto;right:-9px}.tc-table__add_row_end{top:auto;bottom:-9px}.tc-table__resize_column{position:absolute;top:-1px;height:100%;left:-2px;width:3px;background-color:#4a525f;cursor:col-resize;z-index:1;opacity:0}.tc-table__select_line_col,.tc-table__select_line_row{position:absolute;height:10px;top:-16px;left:-1px;right:-1px;background-color:#f4f5f7;border:1px solid #c1c7d0;cursor:pointer;transition:background-color .2s ease}.tc-table__select_line_col:hover,.tc-table__select_line_row:hover{background-color:#ff9090}.tc-table__select_line_row{height:auto;width:10px;left:-16px;top:-1px;bottom:-1px;right:auto}.tc-table__area{padding:10px;height:100%}.tc-table__inp{outline:none;flex-grow:100;min-height:1.5em;height:100%;overflow:hidden}.tc-table__option_button{position:absolute;top:4px;right:4px;visibility:hidden;width:22px;height:20px;border:none;background:none;background-color:#fff;border-radius:3px;padding:0;padding:2px;cursor:pointer;z-index:99}.tc-table__option_button__inner_box{border-radius:3px;background-color:#f4f5f7;width:100%;height:100%;position:relative}.tc-table__option_button__inner_box:hover{background-color:#e2e4e9}.tc-table__option_button__inner_box:active{background-color:rgba(179,212,255,.6)}.tc-table__option_button__inner_box:active svg{color:#0052cc;fill:#0052cc}.tc-table__option_button__inner_box.activated{background-color:#45526c}.tc-table__option_button__inner_box.activated svg{color:#fff;fill:#fff}.tc-table__option_button__inner_box svg{position:absolute;top:45%;left:50%;transform:translate(-50%, -50%);color:#45526c;fill:#45526c}.tc-table__option_table{position:fixed;top:0px;left:0px;color:var(--ds-text, #091e42);background-color:var(--ds-surface-overlay, #ffffff);border-radius:3px;box-shadow:rgba(9,30,66,.25) 0px 4px 8px -2px,rgba(9,30,66,.31) 0px 0px 1px;box-sizing:border-box;overflow:auto;padding:4px 0px;max-height:90vh;min-width:180px;visibility:hidden;z-index:99}.tc-table__option_table__inner{box-sizing:border-box;appearance:none;border:none;display:flex;position:static;flex-direction:column;overflow:auto}.tc-table__option_table__inner__option{display:flex;justify-content:space-between;box-sizing:border-box;width:100%;min-height:var(--ds-scale-500, 40px);margin:var(--ds-scale-0, 0px);padding:var(--ds-scale-100, 8px) var(--ds-scale-250, 20px);-webkit-box-align:center;align-items:center;border:0px;font-size:14px;outline:0px;text-decoration:none;user-select:none;background-color:rgba(0,0,0,0);color:currentcolor;cursor:pointer}.tc-table__option_table__inner__option:hover{background-color:#e2e4e9}.tc-table__option_table__inner__option:active{background-color:rgba(179,212,255,.6)}.tc-table__option_table__inner__option:disabled{color:#e2e4e9;cursor:not-allowed}.tc-table__option_table__inner__option:disabled:hover{background-color:#fff}.tc-table__option_table__inner__option.color-option{position:relative}.tc-table__option_table__inner__option.toggle-row-header-option.row-header-on,.tc-table__option_table__inner__option.toggle-col-header-option.col-header-on{font-weight:bold}.tc-table__option_table__inner__option.toggle-row-header-option.row-header-on::after,.tc-table__option_table__inner__option.toggle-col-header-option.col-header-on::after{content:\\\"\\\\2714\\\\FE0F\\\"}.tc-table .color-palette{position:fixed;top:0px;left:0px;background-color:#fff;border-radius:3px;box-shadow:rgba(9,30,66,.25) 0px 4px 8px -2px,rgba(9,30,66,.31) 0px 0px 1px;box-sizing:border-box;overflow:auto;display:grid;grid-gap:10px;grid-template-columns:repeat(7, 25px);grid-template-rows:repeat(3, 25px);grid-auto-flow:inherit;padding:10px;z-index:100;visibility:hidden}.tc-table .color-palette .color-block{width:27px;height:27px;border:1px solid rgba(179,212,255,.6);border-radius:2px;box-sizing:border-box;margin:0;cursor:pointer}.tc-table .color-palette .color-block:hover{box-shadow:0px 0px 0px 1px #cae5ff}.tc-table .tc-table__cell.selected::after{height:100%;width:100%;border:1px solid #0065ff;background-color:rgba(51,159,255,.231372549);content:\\\"\\\";position:absolute;left:-1px;top:-1px;bottom:0px;z-index:12;display:inline-block;pointer-events:none}.tc-table .context-menu{position:fixed;width:200px;height:auto;z-index:99;background-color:#efefef}.tc-table .context-menu:hover{background-color:#eae6e6}.tc-table .context-menu__button{width:calc(100% - 20px);height:40px;border-bottom:1px solid #d3d3d3;display:flex;align-items:center;padding-left:20px;font-size:13px;cursor:pointer}\", \"\"]);\n\n// exports\n","module.exports = \"<svg width=\\\"18\\\" height=\\\"14\\\"><path d=\\\"M2.833 8v1.95a1.7 1.7 0 0 0 1.7 1.7h3.45V8h-5.15zm0-2h5.15V2.35h-3.45a1.7 1.7 0 0 0-1.7 1.7V6zm12.3 2h-5.15v3.65h3.45a1.7 1.7 0 0 0 1.7-1.7V8zm0-2V4.05a1.7 1.7 0 0 0-1.7-1.7h-3.45V6h5.15zM4.533.1h8.9a3.95 3.95 0 0 1 3.95 3.95v5.9a3.95 3.95 0 0 1-3.95 3.95h-8.9a3.95 3.95 0 0 1-3.95-3.95v-5.9A3.95 3.95 0 0 1 4.533.1z\\\"></path></svg>\"","module.exports = \"<svg width=\\\"18\\\" height=\\\"18\\\" viewBox=\\\"0 0 18 18\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M0 2V8V10V16V18H2H8H10H16H18V16V10V8V2V0H16H10H8H2H0V2ZM8 2L2 2V8H8L8 2ZM8 10H2V16H8L8 10ZM10 16V10H16V16H10ZM10 8V2L16 2V8H10Z\\\"></path></svg>\""],"sourceRoot":""}